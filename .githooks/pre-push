#!/usr/bin/env bash
set -euo pipefail

echo "pre-push: running Rust workspace tests..."

if command -v cargo-nextest >/dev/null 2>&1; then
  cargo nextest run --all-targets --all-features
else
  echo "pre-push: cargo-nextest not found; falling back to cargo test."
  cargo test --all-targets --all-features
fi
