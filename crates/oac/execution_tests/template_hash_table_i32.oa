instantiate IntTable = HashTable[I32]

fun print_lookup(v: IntTable__Lookup) -> I32 {
	match v {
		IntTable__Lookup.Missing => {
			print(99)
			return 0
		}
		IntTable__Lookup.Found(x) => {
			print(x)
			return 0
		}
	}
}

fun main() -> I32 {
	table = IntTable.empty()
	print(IntTable.size(table))

	table = IntTable.put(table, 1, 10)
	table = IntTable.put(table, 9, 90)
	table = IntTable.put(table, 2, 20)
	print(IntTable.size(table))

	print_lookup(IntTable.get(table, 1))
	print_lookup(IntTable.get(table, 9))
	print_lookup(IntTable.get(table, 42))

	table = IntTable.put(table, 1, 11)
	print(IntTable.size(table))
	print_lookup(IntTable.get(table, 1))

	print(IntTable.contains_key(table, 2))
	print(IntTable.contains_key(table, 42))

	return 0
}
